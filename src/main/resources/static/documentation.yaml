openapi: 3.0.1
info:
  title: OT275-Server "Somos m√°s"
  version: v1.0
servers:
  - url: http://localhost:8080
    description: Generated server url
paths:

  /auth/register:

    post:
      security: [ ]
      tags:
        - Auth
      operationId: register
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RegisterUserRequest'
        required: true
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RegisterUserResponse'

  /auth/login:

    post:
      security: [ ]
      tags:
        - Auth
      operationId: login
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AuthenticationRequest'
        required: true
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AuthenticationResponse'

  /activities:

    post:
      tags:
        - Activities
      operationId: create_4
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateActivityRequest'
        required: true
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CreateActivityResponse'

  /activities/{id}:

    put:
      tags:
        - Activities
      operationId: update_2
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
            format: int64
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateActivityRequest'
        required: true
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UpdateActivityResponse'

  /categories:

    post:
      tags:
        - Categories
      summary: Create category
      operationId: createCategory
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateCategoryRequest'
      responses:
        "201":
          description: Category created successfully
          content:
            application/json:
              example:
                id: 2
                name: new-category
                description: category-details
                image: new-category.jpg
        "400":
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BadRequestCategories'
        "403":
          description: Forbidden
          content:
            application/json:
              $ref: '#/components/schemas/Forbidden'
        "500":
          description: The server encountered an unexpected problem
          content:
            application/json:
              $ref: '#/components/schemas/InternalServerError'

    get:
      tags:
        - Categories
      summary: Returns a page of categories
      operationId: getCategories
      parameters:
        - in: query
          name: page
          allowEmptyValue: true
          description: Page index
          required: false
          schema:
            type: integer
        - in: query
          name: size
          allowEmptyValue: true
          description: Page size
          required: false
          schema:
            type: integer
      responses:
        "200":
          description: OK
          example:
          content:
            application/json:
              example:
                page: 0
                size: 5
                totalPages: 1
                categories:
                  - id: 1
                    description: books
                    imageUrl: book.jpg
                    name: Literature
                  - id: 2
                    description: football
                    imageUrl: football.jpg
                    name: Sports
                  - id: 3
                    description: Entertainment
                    imageUrl: game.jpg
                    name: Games
                  - id: 4
                    description: Java Frameworks
                    imageUrl: frameworks.jpg
                    name: Frameworks
                  - id: 5
                    description: Clean Architecture
                    imageUrl: hexagonal.jpg
                    name: Software Architecture
        "403":
          description: Authentication has failed or not yet been provided
          content:
            application/problem+json:
              example:
                statusCode: 403
                message: "Access denied"
                moreInfo: "Access Denied. Contact your administrator."

  /categories/{id}:

    get:
      tags:
        - Categories
      operationId: get_1
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
            format: int64
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GetCategoryResponse'

    put:
      tags:
        - Categories
      operationId: update_1
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
            format: int64
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateCategoryRequest'
        required: true
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UpdateCategoryResponse'

    delete:
      tags:
        - Categories
      operationId: delete_6
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
            format: int64
      responses:
        "200":
          description: OK

  /comments:

    post:
      tags:
        - Comments
      operationId: create_2
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateCommentRequest'
        required: true
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CreateCommentResponse'

    get:
      tags:
        - Comments
      operationId: list_6
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ListCommentResponse'

  /comments/{id}:

    put:
      tags:
        - Comments
      operationId: update_4
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
            format: int64
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateCommentRequest'
        required: true
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GetCommentResponse'

    delete:
      tags:
        - Comments
      operationId: delete_5
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
            format: int64
      responses:
        "200":
          description: OK

  /contacts:

    post:
      tags:
        - Contact
      operationId: create_1
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateContactRequest'
        required: true
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CreateContactResponse'

    get:
      tags:
        - Contact
      operationId: list_5
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ListContactResponse'

  /members:

    get:
      tags:
        - Members
      operationId: list_4
      parameters:
        - name: pageable
          in: query
          required: true
          schema:
            $ref: '#/components/schemas/Pageable'
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ListMemberResponse'

  /members/{id}:

    delete:
      tags:
        - Members
      operationId: delete_4
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
            format: int64
      responses:
        "200":
          description: OK

  /news:

    post:
      summary: Creates a "New" and persists it to the databse.
      tags:
        - News
      operationId: create-news
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateNewsRequest'
        required: true
      responses:
        "201":
          description: Creation was succesfull, the created "News" is returned.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GetNewsResponse'
        "400":
          description: The provided body does not have a correct misses one of more of the validations.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BadRequestCreateNews'
        "403":
          description: Invalid Credentials were provided. Admin credentials needed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Forbidden'

    get:
      summary: Returns the first page of "News", listing up to ten elements, "Link" header may include links to subsequent pages if more than ten elements exist
      tags:
        - News
      operationId: paginate-news
      responses:
        "200":
          description: The first page of results is returned, if there are no "News" in the databse it returns an emptly list with zero pages and no links
          headers:
            Link:
              description: Links  leading to the first,last,next and/or previous page of  the results if available
              schema:
                $ref: '#/components/schemas/LinkHeader'
              type: string
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ListNewsResponse'
        "403":
          description: Invalid Credentials were provided. User or Admin credentials needed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Forbidden'

  /news/{id}:

    get:
      summary: Returns the "News" resource identified by the "id" parameter provided in the URI path.
      tags:
        - News
      operationId: get-news
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
            format: int64
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GetNewsResponse'
        "404":
          description: The given "id" does not corresponds to an entry in the database
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/NewsNotFound'
        "403":
          description: Invalid Credentials were provided. User or Admin credentials needed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Forbidden'

    put:
      summary: Updates the "News" resource identified by the "id" parameter provided in the URI path.
      tags:
        - News
      operationId: update-news
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
            format: int64
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateNewsRequest'
        required: true
      responses:
        "200":
          description: Creation was succesfull, the created "News" is returned.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GetNewsResponse'
        "400":
          description: The provided body does not have a correct misses one of more of the validations.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BadRequestUpdateNews'
        "403":
          description: Invalid Credentials were provided. Admin credentials needed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Forbidden'
        "404":
          description: The given "id" does not corresponds to an entry in the database
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/NewsNotFound'

    delete:
      summary: Deletes the "News" resource identified by the "id" parameter provided in the URI path, by setting the "isSoftDeleted" attribute to "true"
      tags:
        - News
      operationId: delete-news
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
            format: int64
      responses:
        "200":
          description: The resource has been succesfully deleted
        "403":
          description: Invalid Credentials were provided. Admin credentials needed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Forbidden'
        "404":
          description: The given "id" does not corresponds to an entry in the database
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/NewsNotFound'

  /news/{id}/comments:

    get:
      summary: Returns a list of comments related to the "News" resource identified by the "id" paramether in the URI path.
      tags:
        - News
      operationId: getWithComments
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
            format: int64
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GetNewsWithCommentsResponse'
        "403":
          description: Invalid Credentials were provided. Admin credentials needed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Forbidden'
        "404":
          description: The given "id" does not corresponds to an entry in the database
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/NewsNotFound'


  /organization/public:

    get:
      tags:
        - Organization
      operationId: get
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GetOrganizationResponse'

    patch:
      tags:
        - Organization
      operationId: patch
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateOrganizationRequest'
        required: true
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UpdateOrganizationResponse'

  /slides:

    post:
      tags:
        - Slides
      operationId: add
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateSlideRequest'
        required: true
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GetSlideResponse'

    get:
      tags:
        - Slides
      operationId: list
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ListSlideResponse'

  /slides/{id}:

    get:
      tags:
        - Slides
      operationId: getBy
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
            format: int64
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GetSlideResponse'

    put:
      tags:
        - Slides
      operationId: update_2
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
            format: int64
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateSlideRequest'
        required: true
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UpdateSlideResponse'

    delete:
      tags:
        - Slides
      operationId: delete_2
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
            format: int64
      responses:
        "200":
          description: OK

  /testimonials:

    post:
      tags:
        - Testimonials
      operationId: create
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateTestimonialRequest'
        required: true
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GetTestimonialResponse'

    get:
      tags:
        - Testimonials
      operationId: list_1
      parameters:
        - name: pageable
          in: query
          required: true
          schema:
            $ref: '#/components/schemas/Pageable'
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ListTestimonialResponse'

  /testimonials/{id}:

    put:
      tags:
        - Testimonials
      operationId: update_1
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
            format: int64
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateTestimonialRequest'
        required: true
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GetTestimonialResponse'

    delete:
      tags:
        - Testimonials
      operationId: delete_1
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
            format: int64
      responses:
        "200":
          description: OK

  /users:

    get:
      tags:
        - Users
      operationId: list
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ListUserResponse'

  /users/{id}:

    put:
      tags:
        - Users
      operationId: update
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
            format: int64
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateUserRequest'
        required: true
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UpdateUserResponse'

    delete:
      tags:
        - Users
      operationId: delete
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
            format: int64
      responses:
        "200":
          description: OK

components:
  schemas:
    UpdateUserRequest:
      required:
        - firstName
        - lastName
        - password
      type: object
      properties:
        firstName:
          type: string
        lastName:
          type: string
        imageUrl:
          type: string
        password:
          maxLength: 16
          minLength: 8
          type: string
    UpdateUserResponse:
      type: object
      properties:
        id:
          type: integer
          format: int64
        firstName:
          type: string
        lastName:
          type: string
        imageUrl:
          type: string
    UpdateCategoryRequest:
      required:
        - name
      type: object
      properties:
        name:
          type: string
        description:
          type: string
        imageUrl:
          type: string
    UpdateCategoryResponse:
      type: object
      properties:
        id:
          type: integer
          format: int64
          writeOnly: true
        name:
          type: string
          writeOnly: true
        description:
          type: string
          writeOnly: true
        imageUrl:
          type: string
          writeOnly: true
    UpdateActivityRequest:
      required:
        - content
        - imageUrl
        - name
      type: object
      properties:
        content:
          type: string
        imageUrl:
          type: string
        name:
          type: string
    UpdateActivityResponse:
      type: object
      properties:
        id:
          type: integer
          format: int64
        content:
          type: string
        imageUrl:
          type: string
        name:
          type: string
    CreateSlideRequest:
      required:
        - base64FileEncoded
      type: object
      properties:
        text:
          type: string
        order:
          type: integer
          format: int32
        base64FileEncoded:
          type: string
        contentType:
          type: string
    GetSlideResponse:
      type: object
      properties:
        id:
          type: integer
          format: int64
        imageUrl:
          type: string
        text:
          type: string
        position:
          type: integer
          format: int32
    CreateCategoryRequest:
      required:
        - name
      type: object
      properties:
        name:
          type: string
        description:
          type: string
        image:
          type: string
    CreateCategoryResponse:
      type: object
      properties:
        id:
          type: integer
          format: int64
        name:
          type: string
        description:
          type: string
        image:
          type: string
    RegisterUserRequest:
      type: object
      properties:
        firstName:
          type: string
        lastName:
          type: string
        email:
          type: string
        password:
          maxLength: 16
          minLength: 8
          type: string
    RegisterUserResponse:
      type: object
      properties:
        firstName:
          type: string
        lastName:
          type: string
        email:
          type: string
        token:
          type: string
    AuthenticationRequest:
      type: object
      properties:
        email:
          type: string
        password:
          maxLength: 16
          minLength: 8
          type: string
    AuthenticationResponse:
      type: object
      properties:
        firstName:
          type: string
        lastName:
          type: string
        email:
          type: string
        imageUrl:
          type: string
        token:
          type: string
    SocialMediaRequest:
      type: object
      properties:
        facebookUrl:
          type: string
        linkedInUrl:
          type: string
        instagramUrl:
          type: string
    UpdateOrganizationRequest:
      type: object
      properties:
        name:
          type: string
        imageUrl:
          type: string
        address:
          type: string
        phone:
          type: string
        email:
          type: string
        socialMedia:
          $ref: '#/components/schemas/SocialMediaRequest'
        aboutUsText:
          type: string
        welcomeText:
          type: string
    SocialMediaResponse:
      type: object
      properties:
        facebookUrl:
          type: string
        linkedInUrl:
          type: string
        instagramUrl:
          type: string
    UpdateOrganizationResponse:
      type: object
      properties:
        name:
          type: string
        imageUrl:
          type: string
        address:
          type: string
        phone:
          type: string
        email:
          type: string
        socialMedia:
          $ref: '#/components/schemas/SocialMediaResponse'
        aboutUsText:
          type: string
        welcomeText:
          type: string
    ListSlideResponse:
      type: object
      properties:
        slides:
          type: array
          items:
            $ref: '#/components/schemas/SlideResponse'
    SlideResponse:
      type: object
      properties:
        imageUrl:
          type: string
        order:
          type: integer
          format: int32
    GetOrganizationResponse:
      type: object
      properties:
        name:
          type: string
        image:
          type: string
        phone:
          type: string
        address:
          type: string
        slides:
          type: array
          items:
            $ref: '#/components/schemas/SlideWithTextResponse'
    SlideWithTextResponse:
      type: object
      properties:
        imageUrl:
          type: string
        order:
          type: integer
          format: int32
        text:
          type: string
    CommentResponse:
      type: object
      properties:
        body:
          type: string
    ListCommentResponse:
      type: object
      properties:
        comments:
          type: array
          items:
            $ref: '#/components/schemas/CommentResponse'
    GetCategoryResponse:
      type: object
      properties:
        id:
          type: integer
          format: int64
          example: 1
        description:
          type: string
          example: Category description
        imageUrl:
          type: string
          example: Category image URL
        name:
          type: string
          example: Category name
    BadRequestCategories:
      type: object
      properties:
        statusCode:
          type: integer
          format: int64
        message:
          type: string
        moreInfo:
          type: array
          items:
            - $ref: '#/components/schemas/OnlySpaceAndLetters'
            - $ref: '#/components/schemas/NameCannotBeEmpty'
    BadRequestCreateNews:
      type: object
      properties:
        statusCode:
          type: integer
          format: int64
          example: 400
        message:
          type: string
          example: Bad Request.
        moreInfo:
          type: array
          items:
            type: string
          example:
            - Name cannot be empty.
            - Name must contain only spaces and letters.
            - Name must be 50 characters or less.
            - Text cannot be empty.
            - Text must be alphanumeric.
            - Image cannot be empty.
            - Image must be alphanumeric without white spaces.
    BadRequestUpdateNews:
      type: object
      properties:
        statusCode:
          type: integer
          format: int64
          example: 400
        message:
          type: string
          example: Bad Request.
        moreInfo:
          type: array
          items:
            type: string
          example:
            - Name cannot be empty.
            - Name must contain only spaces and letters.
            - Name must be 50 characters or less.
            - Text cannot be empty.
            - Text must be alphanumeric.
    NewsNotFound:
      type: object
      properties:
        statusCode:
          type: integer
          format: int64
          example: 404
        message:
          type: string
          example: Object not found in database.
        moreInfo:
          type: array
          items:
            type: string
          example: News not found.
    Forbidden:
      type: object
      properties:
        statusCode:
          type: integer
          format: int64
          example: 403
        message:
          type: string
          example: Access denied.
        moreInfo:
          type: array
          items:
            Type: string
          example:
            - Access Denied. Contact your administrator.
    InternalServerError:
      type: object
      properties:
        statusCode:
          type: integer
          format: int64
        message:
          type: string
        moreInfo:
          type: array
          items:
            - $ref: '#/components/schemas/ContentType'
    ContentType:
      type: object
      properties:
        body:
          type: string
    AccessDenied:
      type: object
      properties:
        body:
          type: string
    NameCannotBeEmpty:
      type: object
      properties:
        body:
          type: string
          value: "Name cannot be empty."
    OnlySpaceAndLetters:
      type: object
      properties:
        body:
    Pageable:
      type: object
      properties:
        page:
          minimum: 0
          type: integer
          format: int32
        size:
          minimum: 1
          type: integer
          format: int32
        sort:
          type: array
          items:
            type: string
    ListNewsResponse:
      type: object
      properties:
        page:
          type: integer
          format: int32
          example: 0
        size:
          type: integer
          format: int32
          example: 10
        totalPages:
          type: integer
          format: int32
          example: 1
        news:
          type: array
          items:
            $ref: '#/components/schemas/GetNewsResponse'
    LinkHeader:
      type: string
      example: <linkToFirst>;rel="first";<linkToLast>;rel="last";<linkToNext>;rel="next";<linkToLast>;rel="last";
    GetNewsResponse:
      type: object
      properties:
        id:
          type: integer
          format: int64
          example: 1
        name:
          type: string
          example: News name
        content:
          type: string
          example: News text
        imageUrl:
          type: string
          example: News image URL
        category:
          $ref: '#/components/schemas/GetCategoryResponse'
    CreateNewsRequest:
      required:
        - image
        - name
        - text
      type: object
      properties:
        name:
          maxLength: 50
          minLength: 0
          type: string
          example: News name
        text:
          type: string
          example: News text
        image:
          type: string
          example: News image URL
    UpdateNewsRequest:
      type: object
      properties:
        name:
          maxLength: 50
          minLength: 0
          type: string
          example: New news name
        content:
          type: string
          example: New news content
        image:
          type: string
          example: New news image URL
    GetNewsWithCommentsResponse:
      type: object
      properties:
        name:
          type: string
          example: News Name
        comments:
          type: array
          items:
            $ref: '#/components/schemas/GetCommentResponse'
    GetCommentResponse:
      type: object
      properties:
        body:
          type: string
          example: Comment content
  securitySchemes:
    BearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
security:
  - BearerAuth: [ ]
tags:
  - name: Auth
  - name: Activities
  - name: Categories
  - name: Comments
  - name: Contact
  - name: Members
  - name: News
    description: CRUD Operations related to the "News" resource.
  - name: Organization
  - name: Slides
  - name: Testimonials
  - name: Users